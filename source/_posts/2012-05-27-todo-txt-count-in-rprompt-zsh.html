---
layout: post
title: Todo.txt Count in RPrompt ZSH
tags:
- Technology
- Todo.txt
- Zsh
status: publish
type: post
published: true
meta:
  dsq_thread_id: '1098039630'
  _edit_last: '1'
:alias: /2012/05/todo-txt-count-in-rprompt-zsh/
---
<p>I've been using Todo.txt for at least a year, both from the commandline and the Android app.</p>
<p>It's great keeping a todo list in text files, synchronized across multiple devices via Dropbox, but there's one nagging thing in my system.<br />
That nagging issue is that Todo.txt doesn't nag me enough about the issues in my todo list!  So, I'm taking steps to resolve this by adding a function to my zshrc configuration.</p>
<p>I mapped out the basic command in the shell by combining todo's ls, grep (to keep only lines starting with numbers), and then a wordcount by line.</p>
<p>The following function was taken from <a href="http://wynnnetherland.com/journal/contextual-todo-list-counts-in-your-zsh-prompt">Wynnnetherland.com</a> and modified since I installed todo.txt through Homebrew, and since I prefer a different command to count the items.</p>
<p>[cc_bash]
todo_count(){
  if $(which todo.sh &amp;&gt; /dev/null)
  then
    num=$(echo $(todo.sh ls | grep "^[0-9]" | wc -l))
    let todos=num
    if [ $todos != 0 ]
    then
      echo "$todos"
    else
      echo ""
    fi
  else
    echo ""
  fi
}
function zle-line-init zle-keymap-select {
RPS1="${${KEYMAP/vicmd/&gt;&gt;&gt; ○[$(todo_count)]}/(main|viins)/± &lt;&lt;&lt;[$(todo_count)]}"
    RPS2=$RPS1
    zle reset-prompt
}[/cc_bash]</p>
<p>The following is a diff of the difference showing the updated function [gist id=2817309]</p>
<p>Now my right hand prompt shows a nice count of incomplete todo items inside square brackets...like so: [gist id=2817339] </p>
<p>Update: My own syntax highlighting is escaping some of the characters, so here's a gist of it [gist id=2817304]</p><!-- #VIMREPRESS_TAG# http://blog.xargs.io/wp-content/uploads/2012/05/wpid225-vimrepress_4fc3086a_mkd.odt wpid225-vimrepress_4fc3086a_mkd.odt -->
