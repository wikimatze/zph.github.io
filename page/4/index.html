

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Civet</title>
  <meta name="author" content="Zander">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content=" ">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zph.github.io/page/4/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Civet" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="Civet" />
  <meta name="og:title" content="Civet" />
  <meta name="og:description" content=" " />
  <meta name="og:url" content="http://zph.github.io/page/4/index.html"/>
  <meta name="url" content="http://zph.github.io/page/4/index.html">
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-25600795-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/">Civet</a>
    <ul class="nav">
      <li><a href="/">Home</a></li>
      <li><a href="/archives">Archives</a></li>
      <li><a href="/me">About</a></li>
      <li><a href="/yo-contact-me">Hire Me</a></li>
    </ul>
    <ul class="nav" data-subscription="rss">
      <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
      
    </ul>
      
    <form class="navbar-form" action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:zph.github.io" />
        <input class="span2" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
      
    
  </div>
</div>
</nav>
  <div id="front-wrapper">
  <div id="hero">
    <div id="hero-inner" class="container">
      <div class="span10 offset1">
  <h1>
    Civet
  </h1>
  <h2>The Spice of Life</h2>
</div>

    </div>
  </div>
  <section id="sub-hero">
    <div class="container">
      <div class="row">
  <div class="span4">
    <h2>About Me</h2>
<p>Polyglot, Problem Solver, and into improving systemic efficiencies.</p>

  </div>
  <div class="span6">
    
<h2>recent public projects</h2>
<dl id="gh_repos" class="dl-horizontal" data-github-user="ZPH" data-github-repo-count="5" data-github-skip-forks="true">
  <dd class="loading">Status updating&#8230;</dd>
</dl>
<script src="/javascripts/github.js" type="text/javascript"> </script>
<script src="/javascripts/libs/jXHR.js" type="text/javascript"> </script>


  </div>
  <div class="span2">
    <h2>found on</h2>

<a href="https://github.com/ZPH/" rel="tooltip" title="Github"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/_ZPH" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>







<h2>contact at</h2>
<a href="mailto:zander@civet.ws">zander@civet.ws</a>
<a href="http://twitter.com/_ZPH" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>


  </div>
</div>

    </div>
  </section>
  <div class="container">
    <div class="row" id="post-container">
    
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2013/02/ignoring-all-the-things/">Ignoring All the Things</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2013-02-16T00:00:00-05:00" pubdate data-updated="true">Feb 16<span>th</span>, 2013</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content"><p>I found a great talk by Scott Hanselman on Vimeo about information overload and learning to ignore things. In the <a href="https://vimeo.com/39020426">video</a> he laments that more conversation is taking place in walled gardens (ie Twitter) rather than on the wide open web (ie blogs).  He also summarizes what I&#8217;ve felt for a few months: * that keeping up with news and the latest things is reducing my ability to produce and innovate *.</p>

<p>It comes back to the concepts in this article: <a href="http://www.informationdiet.com/blog/read/500-words-before-8am">500 Words before 8am</a>.  Start the day as a producer, not a consumer.</p>

<p>In order to work on this, I&#8217;ve set myself up with <a href="https://www.rescuetime.com">RescueTime</a> and am tracking the amount of time spent on &#8216;consumptive tasks&#8217; (no relation to romantic portrayals of consumption by Val Kilmer in &#8216;Tombstone&#8217;).  I&#8217;m receiving pop-up warnings when I exceed a set quantity of time on reading Twitter, reading blogs, etc.  I&#8217;m also looking to transition more of my consumption time to &#8216;curated content&#8217; such as &#8216;ye old books&#8217;.</p>

<p>Another point that I took to heart from Scott Hanselman&#8217;s talk was about learning to use <a href="www.ifttt.com">IFTTT</a>.  It&#8217;s an SF startup that makes common web tasks automatic.  Think of it as a recurrent cron job for the web.  Things like : &#8216;anytime I start a tweet, add the contained links to instapaper&#8217;, or &#8216;anytime I start a vimeo video, post it to twitter&#8217;.  One filter that I added to help with the Ruby Rogues Parley list is &#8216;anytime I star a gmail message, copy the content into Evernote&#8217;&#8230; this should help easily archive good content for later viewing and recall :).</p>

<p>Well, that&#8217;s it for this round of production.  I spent much of last night working on an internal web application for work that I plan to soon pitch to my company :).  I finished the final polish on it (CSS, a little Javascript) and I must say that it feels 100% better.  It&#8217;s a good reminder for me about how important the UI is for applications.</p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2013/02/make-the-shell-your-home/">Make the Shell Your $HOME</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2013-02-14T00:00:00-05:00" pubdate data-updated="true">Feb 14<span>th</span>, 2013</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&#8217;s talk about how to use the shell.  It&#8217;s a dirty secret that many of the repetitive commands used in the day-to-day world of developers are rudimentary shell commands.</p>

<p>Think of the activity of making a new folder and moving into that folder to start writing code, it looks something like this: <code>mkdir new_project; cd new_project; vim new_project_code_file.rb</code>.</p>

<p>Tighten it up and pay attention to simple improvements in the shell environment.  ( My experiences are with BASH and ZSH ).  That command becomes the following command with a little bit of improved shell configs: <code>mkdircd new_project (makes dir and cds in the same command); e !!1_code_file.rb</code>.</p>

<p>What&#8217;s in this shorter series of commands?  Let&#8217;s break it down to parts:</p>

<ul>
<li><code>mkdir</code> and <code>cd</code> are replaced by a single new command <code>mkdircd</code>.  We save the repetition of typing the folder name twice by compressing the command into a single request.  It&#8217;s accomplished by setting up an alias in the shell configs.</li>
<li><code>vim new_project_code_file.rb</code> is replaced with <code>e !!1_code_file.rb</code>. The <code>e</code> command is another shell tweak of mine.  <code>e</code> is a shell function that steps in for the vim command and opens files for editing in a more intelligent way.  See the source here: <a href="https://gist.github.com/0aec0ef19fce9bbd3e3d">e</a> (Note that it also depends upon the wonderful FASD utility available on Github.com).</li>
<li><code>!!1</code> becomes the first argument from the prior line, i.e. the first item after the command itself.  Using !!1, !!2, !!3 has saved me countless seconds of retyping the same long folder/file names.</li>
</ul>

<p>So, make the shell work for you!  If you&#8217;re spending time in a new envionrment like the Linux Terminal or OSX&#8217;s Terminal, learn to configure that BASH or ZSH environment.</p>

<p>It will pay off nicely!</p>

<p>If you liked the article, follow me on Twitter at <a href="http://www.twitter.com/_zph">@_ZPH</a>.</p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2013/02/getting-started-configuring-bashzsh/">Getting Started Configuring Bash/Zsh</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2013-02-14T00:00:00-05:00" pubdate data-updated="true">Feb 14<span>th</span>, 2013</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content">I saw a post this afternoon by a member of Ruby Rogue&#8217;s Parley list asking how to write Ruby code to help them create a shorthand word for a longer commandline command.  It takes moxy to ask questions on a list filled with many experienced developers.  I was happy to see that positive responses flowed in.

The immediate response was that the individual should perform the action by writing commandline aliases using the shell &#8216;alias&#8217; command. But that only points the developer in the right direction. Instead of just pointing in the direction, the rest of this post will be walking a new developer through setting up helpful customizations in the shell environment.

(Note, the generic information will be fairly compatible whether using the BASH environment or ZShell environment. Moving past general configurations into advanced configurations are where the two start to diverge, particularly with the environmental settings used in .bashrc or .zshrc files. I&#8217;ve found that the best remedy for this is reading through and gradually adopting a few lines here and there from well commented .bashrc/.zshrc files).

Many of the customizations in the shell relate to minimizing repetitive keystrokes. Imagine the difference between typing [cc_bash]bundle exec rails server[/cc_bash] and [cc_bash]be r s[/cc_bash]. If you&#8217;re typing this more than occasionally, it&#8217;s a large savings of keystrokes over a period of months. So how is it done? <em>* Aliases *</em>!

Simply put, include the following code in your config file (a generic term that I&#8217;ll use for either .bashrc or .zshrc, depending on your shell):
[cc_bash]alias j=&#8221;jobs&#8221;[/cc_bash]

Or to help avoid dumb mistakes (it makes the remove command verbose and interactive =D. Even astute geeks fat finger the occasional keys )
[cc_bash]alias rm=&#8221;rm -iv&#8221;[/cc_bash]

I&#8217;ve taken to heart the adage, which I can&#8217;t attribute precisely, that anything typed more than a couple times on the commandline should be shortened to save future keystrokes. To prove this point, I currently have greater than <em>* 100 *</em> aliases and growing.  Note that the following is from dumping all of my aliases to STDOUT via [cc_bash]alias > jist -p -c[/cc_bash] and is not representative of one of my alias files.  (For that, see the second inset codeblock).
<script type="text/javascript" src="https://gist.github.com/zph/4958386.js"></script>

Here&#8217;s an example of one of my alias files&#8230; appropriately called &#8216;aliases.conf.zsh&#8217;:
<script src="https://gist.github.com/zph/4965016.js"></script>
(Original code is at: https://github.com/zph/zph/blob/master/home/.zsh.d/aliases.conf.zsh)

So that&#8217;s &#8216;aliases&#8217;. I find that they&#8217;re easier to keep organized if I setup a dedicated &#8216;.zsh.d&#8217; folder. By which I mean that I created a folder called &#8216;.zsh.d&#8217; in the base of my home directory with the following layout:
<script type="text/javascript" src="https://gist.github.com/zph/1f94ccb11a59eee9ffb0.js"></script>
This folder contains all of the &#8216;zsh&#8217; configuration files on my system other than &#8216;.zshrc&#8217;.  Each general category of config files gets its own file, ie git.zsh, ruby.zsh, homebrew.zsh, etc.  Helps me keep everything organized =D.

I set the following lines in my &#8216;~/.zshrc&#8217; to source each file within the &#8216;.zsh.d&#8217; directory that has the extension of &#8216;.zsh&#8217;
[cc_bash]
_source_zshd(){
# Finally, source all the files in zsh.d (ALPHA order)
for zshd in $(find ~/.zsh.d/*.zsh | sort ); do
source &#8220;${zshd}&#8221;
done
}
_source_zshd
[/cc_bash]

This isn&#8217;t necessary, but it helps me keep the individual configurations nicely ordered.

To recap, use aliases. Use the daylights out of them. Make your shell a finely honed tool that&#8217;s nicely crafted to your needs. Oh yeah&#8230; do the same with &#8216;functions&#8217; which I can cover in a future blog post.  And look into <a href="https://github.com/clvv/fasd" title="FASD">FASD</a> because it&#8217;s awesome like Narwhals!

Questions, thoughts, jeers, feedback&#8230; catch me on &#8216;ye ol Twitters&#8217; <a href="https://twitter.com/_zph">@_ZPH</a>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/trello-archiver-from-scratch/">Trello-Archiver From Scratch</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-29T00:00:00-05:00" pubdate data-updated="true">Dec 29<span>th</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content"><p>Trello-Archiver is a set of Ruby scripts that allows one to export their Trello board into a CSV, TSV, or XLSX file. It was started by another person on Github.com named Mad_Typist. Early on in the process I sent them a pull request to contribute my changes back&#8230; but they don&#8217;t seem to be around. Given that, I&#8217;ve forked the project and continued to develop it for my own benefit.</p>

<p>Trello-Archiver relies on a few conventions that exist in the Ruby world. 1. Project dependencies are managed with <code>Bundler</code> 2. A semi-recent version of Ruby is used <code>&gt;= 1.9.2</code></p>

<p>To use the project on a system that isn&#8217;t setup for Ruby development, the first step is to install a recent version of Ruby. I prefer to use a tool called Ruby Version Manager for this <a href="www.rvm.io">RVM</a>.</p>

<p>Install a sane Ruby Version Manager along with Recent Ruby
<code>curl -L https://get.rvm.io | bash -s stable --ruby</code></p>

<p>Source the installed script to allow for using RVM this first time w/ this command: 
<code>source ~/.rvm/scripts/rvm</code></p>

<p>Future logins will automatically source RVM using your bashrc or zshrc.</p>

<p>The next step is to clone the <a href="https://github.com/zph/trello-archiver.git"> Trello-Archiver </a> repo from Github.</p>

<p>Then <code>cd trello-archiver</code> and run <code>bundle install</code>. Bundler installs the necessary dependencies for <strong>Trello-Archiver</strong>. The nice feature about Bundler is that it manages individual projects&#8217; dependencies independently :).</p>

<p>Next, <code>cp config.example.yml config.yml</code>. Config.example.yml is the template for where the authentication credentials are stored along with any default settings.</p>

<p>Open up <code>config.yml</code> with your favorite text editor. Instructions are inclosed in there for how to gather your secret credentials from Trello.com.</p>

<p>First, open <code>https://trello.com/1/appKey/generate</code> in your web browser. Copy the first key as your &#8216;public key&#8217; and the second (longer) key as your &#8216;private_key&#8217;.</p>

<p>Next we need to enter those values into a special url: <code>https://trello.com/1/connect?key=PUBLIC_KEY_FROM_ABOVE&amp;name=ANYNAME&amp;response_type=token&amp;scope=read,account&amp;expiration=never</code> The two values that need replacing in this URL are PUBLIC<em>KEY</em>FROM_ABOVE nd ANYNAME. ANYNAME is a placeholder for any text that you want to use to identify this key, ie it could be TrelloArchiver. Also note that this is authorizing Read-Only access. This way, even if there&#8217;s a bug in the software the token won&#8217;t allow changes to your Trello information.</p>

<p>Past that value into your web browser and click allow on the confirmation webpage.</p>

<p>The following page that loads has your &#8216;access<em>token</em>key&#8217;. Copy this value into your <code>config.yml</code>. Save <code>config.yml</code> and exit to commandline.</p>

<p><em>That&#8217;s it for authentication setup</em>! Make sure to be careful with this config.yml and don&#8217;t go adding it to any public git repos ;).</p>

<p>Now for backing things up :). Decide if you want a specific board backed up or all of them.</p>

<p>Let&#8217;s backup a single board: -<code>ruby bin/trello_backup.rb</code> -Choose your board by number and hit enter -Enter a filename or not (it defaults to name of board and date stamp) -Defaults to exporting as XLSX (this is easily changed in script).</p>

<p>Now let&#8217;s backup all the boards: -<code>ruby bin/trello-autoarchive.rb</code> -Sit back and wait for it to finish! -It&#8217;s set to backup all boards with default names and using XLSX filetype.</p>

<p>Caveats: It saves these files into the current folder. Apparently I broke CSV functionality with some recent changes. I&#8217;ll get it working again. The spreadsheet structure is what works for me. If you need a different configuration, please let me know and I&#8217;ll look into it. Not all info is backed up. For full backup, download your JSON export from Trello. The main thing that I didn&#8217;t include in Trello-Archiver is a set of timestamps for when a Card is moved to each List. This could be a future feature if others have a need for it.</p>

<p>Below is a Gist showing the shell commands</p>

<script src="https://gist.github.com/4411301.js"></script>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/rcodetools/">RCodeTools - How to Get Them Working in VIM</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-25T00:00:00-05:00" pubdate data-updated="true">Dec 25<span>th</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/tnoda/rcodetools">RCodeTools</a> is an add-on for popular neckbeard text editors such as VIM and Emacs. (My preference currently being VIM).

I came across it through <a href="http://devblog.avdi.org/rubytapas/">RubyTapas Screencasts</a> by Avdi Grimm.  He uses it extensively in his screencasts for crystal clear explanations and live displays of code execution.</p>

<p>RCodeTools adds hash comments (ie [cci_bash] #=> [/cci_bash]) to the text editor buffer.  Then when another command is executed, the whole buffer is evaluated and the area beyond the hash comment is populated with the output from that specific line(s) of code.</p>

<p>It&#8217;s remarkably helpful for explaining and demonstrating code because it avoids any context shift.  The comments serve to demonstrate the code&#8217;s state at any given moment!</p>

<p>Avdi Grimm uses RCodeTools inside Emacs in the screencasts and I was eager to begin using RCodeTools myself.  I had difficulty getting the plugin to work in VIM, resulting in attempts to reinstall VIM, modify the $PATH, etc.</p>

<p>Turns out there is a simpler way:
1. Install RCodeTools into your ~/.vim/ folder.  Specifically this means the vimscript files.
2. Install vim-rvm for managing path.
3. Gem install rcodetools inside your standard RVM ruby.
4. Add mappings to VIMRC.  Included are my mappings (which are recommended by the README.vim)</p>

<script src="https://gist.github.com/4459982.js"></script>

<p>I look forward to putting this addon to good use at future <a href="http://coderetreat-leandog-2013-1.eventbrite.com/">CodeRetreats</a>!  And it&#8217;s the perfect compliment to screencasting.</p>

<p>Thanks Avdi for drawing my attention to this wonderful tool.</p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/ruby-off-the-rails-ep-1-zero-to-ruby-pt-2/">Ruby Off the Rails - Ep. 1 &#8211; Zero to Ruby &#8211; Pt. 2</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-24T00:00:00-05:00" pubdate data-updated="true">Dec 24<span>th</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&#8217;s the second installment, briefly covering installing RVM and an approachable text editor (Sublime Text 2). I advocate for focusing learning on one area at a time which means learn Ruby rather than starting to learn Ruby and VIM at the same time. (Learn VIM or EMACS once you&#8217;re further along with the language itself and see it as a long term investment in your productivity and happiness as a code crafter). Ep. 2 &#8211; Zero to Ruby &#8211; Pt. 2 <a href="http://vimeo.com/56214356">Ruby Off the Rails - Ep 2. - Zero to Ruby Pt. 2</a> from <a href="http://vimeo.com/zph">ZPH</a> on <a href="http://vimeo.com">Vimeo</a>. Here&#8217;s the source for the commands used in the episode:</p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/ruby-off-the-rails-ep-1-zero-to-ruby-pt-1/">Ruby Off the Rails - Ep. 1 &#8211; Zero to Ruby &#8211; Pt. 1</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-23T00:00:00-05:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content">Ruby Off The Rails is a new series of screencasts that I will be publishing.

The first cluster of videos will address the problem of getting started with Ruby development by using a virtual installation of Ubuntu Linux running inside Virtualbox.  It&#8217;s simpler than it sounds and it preserves the integrity of your everyday system.

Here&#8217;s the first installment, enjoy!  (I recommend opening the video for fullscreen display to better view the text)

<iframe src="http://player.vimeo.com/video/56184359" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> <p><a href="http://vimeo.com/56184359">Ruby Off the Rails - Ep. 1 - Zero to Ruby - Part 1</a> from <a href="http://vimeo.com/zph">ZPH</a> on <a href="http://vimeo.com">Vimeo</a>.</p>

<p>Commands from Ep. 1</p>
<script src="https://gist.github.com/4368084.js"></script>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/jdbc-mssql-and-jruby-oh-my/">JDBC, MsSQL, and JRuby, Oh My!</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-22T00:00:00-05:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content">I was recently in a position of needing to access information from a legacy database on a Microsoft SQL Server ( 2005 ). Since I&#8217;d prefer that the contact came from a *NIX system (probably Ubuntu), I checked out ODBC and JDBC as options.

Based on a couple of blog entries by fellow Rubyists and ODBC users, the ODBC configuration files add an extra layer of complexity for the database connection. I chose to do it with JDBC because it allows those settings to be configured in the script/config itself. Also, with the sqljdbc*.jar running on the JVM we have platform independence.

Now, on to the implementation:
<ul>
	<li>On the SQL Server box</li>
	<li>Allow mixed authentication (it appears that JDBC does not interface with Windows User credentials based on cursory research)</li>
	<li>Setup a unique SQL Server Auth User who has the appropriate degree of authorization on the database. Consider read-only if your application is limited to querying the DB rather than writing to it. This will limit the risk of inadvertent writes.</li>
	<li>Depending on setup, you may need to open ports 1433 and 1434 on the SQL Server&#8217;s firewall. If possible, only do this step on an internally facing instance of the SQL Server. (Less attack surface to the internet is a good idea).</li>
	<li>Test the connection by using SQL User authentication when connecting with the builtin Microsoft SQL Server Management program. If all goes well, this tells you that it&#8217;s configured correctly when accessing from the same system.</li>
</ul>
Next to connect from a remote system. You&#8217;ll need the following pieces of information: the database&#8217;s name, the database ip address, the database instance name (ie defaults to SQLEXPRESS when using SQL Express), the Sql username and password
<ul>
	<li>On the remote system (the Linux box)</li>
	<li>Download and extract the following file from Microsoft, this is the JDBC adapter file that they provide</li>
</ul>
[cc]
http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&amp;id=21599
[/cc]
OR the direct link at the time of this article:
[cc]
http://download.microsoft.com/download/D/6/A/D6A241AC-433E-4CD2-A1CE-50177E8428F0/1033/sqljdbc<em>3.0.1301.101</em>enu.tar.gz
[/cc]

Extract that into a convenient place in near where your connection code exists. I chose to use a standard Ruby project layout as follows:
[cc]
|&#8211; Gemfile
|&#8211; Gemfile.lock
|&#8211; Guardfile
|&#8211; README.md
|&#8211; bin
|&#8211; features
|&#8211; jars
| |&#8211; sqljdbc.jar
| |&#8211; sqljdbc4.jar
| <code>-- sqljdbc_3.0.1301.101_enu.tar.gz
|-- lib
| |-- README
| |-- jruby_demo.rb
| |-- tds_demo.rb
|</code>&#8211; demo.rb
|&#8211; spec
`&#8211; spec_helper.rb
7 directories, 16 files
[/cc]

Notice that the sqljdbc*.jar files are inside jars which is on the same level of nesting as the lib directory. This is important when referencing their location in the code.

Then install JRuby if not currently installed. I use <a href="www.rvm.io">RVM</a> for easy Ruby switching. (Thanks to Keith Burnett for posting a comment indicating that this portion was out of order&#8230; silly me!)

Once the JARs are extracted, run <code>bundle install</code> to request that Bundler install the required dependencies. 

Next modify the following script to help you get started. Note that you&#8217;ll need to replace the values of the CONSTANTS as appropriate for your IP addresses, username, passwords, etc.

<script src="https://gist.github.com/4361158.js"></script>

Of further note is that a class will need to be defined for each table in the database that you wish to access. I briefly outline this in the comments of the code. This is fairly standard ActiveRecord use.

Questions, comments, post them here or to me on Twitter <a href="www.twitter.com/_ZPH"> @_ZPH </a>.

<!-- #VIMREPRESS_TAG# http://198.211.104.146/wp-content/uploads/2012/12/vimrepress_50d62160_mkd.odt vimrepress_50d62160_mkd.odt -->
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/refactoring-a-weighty-question/">Refactoring. .. a Weighty Question</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-18T00:00:00-05:00" pubdate data-updated="true">Dec 18<span>th</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content">I&#8217;ve been working on a library for easily exporting <a href="www.trello.com">Trello</a> information to CSV, TSV, and XLSX. It&#8217;s currently working well for all three formats although the code itself is first or second draft quality. (Not that XLSX has some issues of its own when done from Ruby. I&#8217;d like to solve it eventually but it&#8217;s on the back seat since the files still open.)
I took the time to import it into CodeClimate&#8217;s automated test system to see where potential issues are.

It revealed that one particular set of methods was far too complex. These were the methods that generate the CSV or XLSX file.

I sat down to refactor them while under the weather this weekend and here&#8217;s what I accomplished:

-Extracted code out into methods (needs more of this as methods don&#8217;t have single responsibilities)
-Abstracted the process into a single uber method that calls submethods (could be private methods later in development)
-In order to abstract the process to be identical for CSV and XLSX, I found one spot that needed an [cci_ruby]eval(content)[/cci_ruby] statement. ( Perhaps in the future I can adapt a lambda to better suit this purpose?? )

Here are the different versions of it:

Before-<script type="text/javascript" src="https://gist.github.com/4330951.js"></script>

After-<script type="text/javascript" src="https://gist.github.com/4330957.js"></script>

Diff-<script type="text/javascript" src="https://gist.github.com/4331152.js"></script>

Looking at it again I want to extract the different classes into their own files for better compartmentalizing the code.

Let me know in the comments what code smells are present or what refactorings are still advised.

<!-- #VIMREPRESS_TAG# http://198.211.104.146/wp-content/uploads/2012/12/vimrepress_50d0c28d_mkd.odt vimrepress_50d0c28d_mkd.odt -->
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/2012/12/easy-ssh-tunnel-on-osx/">Easy SSH Tunnel on OSX</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Zander</span></span>
  

 - 
        








  


<time datetime="2012-12-16T00:00:00-05:00" pubdate data-updated="true">Dec 16<span>th</span>, 2012</time> - 
        


        
      </p>
    
  </header>


  <div class="entry-content">I recently found myself working from a restaurant with open WIFI. After having someone on open WIFI snatch my Facebook credentials back in 2009, I&#8217;ve become understandably paranoid about security on unsafe connections.

I spent a few minutes setting up a Squid Proxy on my VPS, when I came upon a better solution: set a SOCKS Proxy in OSX and create an SSH tunnel.
<h1>How it works</h1>
The SSH tunnel connects to the VPS using an encrypted channel. This is open for use on a localport such as 8080 (or a randomly assigned one w/ script).
The SOCKS Proxy passes network requests to the localport instead of sending them to the web/email-server/etc.
<h1>How to do it</h1>
On OSX it consists of the two following steps:
[cc_bash]sudo networksetup -setsocksfirewallproxy Wi-Fi 127.0.0.1 $localport off[/cc_bash]
[cc_bash]ssh -f -p $remoteport -D $localport $remoteuser@$remoteproxy sleep 1d[/cc_bash]

This is all well and good, but someone went to the trouble of wrapping this in a script: <a href="https://github.com/12k/osx-proxy">OSX-PROXY</a>.

I took a little bit of time this weekend and refactored the code to extract functions, utilize a case statement, and add extra commandline arguments.

&nbsp;

My revised script also toggles the state of the proxy if no arguments are given.
<h2>Update</h2>
The aforementioned code works very well but I&#8217;m not sure if it re-routes all DNS requests which could divulge personal information. So I switched to this python library that re-routes all activity and is more established: <a href="https://github.com/apenwarr/sshuttle">SShuttle</a>.

Add an alias to the shell for quick starting with default settings: [code]alias sshuttle_start=&#8217;<code>sshuttle --dns -vvr user@vps 0/0'</code> [/code](Replace user and vps placeholders with the appropriate info).

PS - Never ever trust public or semi-public Wifi.  Using a proxy like this is the minimum security that you should consider.

<!-- #VIMREPRESS_TAG# http://198.211.104.146/wp-content/uploads/2012/12/vimrepress_50ceaa05_mkd.odt vimrepress_50ceaa05_mkd.odt -->
</div>
  
  


</div>

      </article>
    
    </div>
      <div class="row">
        <ul class="pager">
          
            <li class="previous">
              <a href="/page/5/">&larr; Older</a>
            </li>
          
          
            <li class="next">
              <a class="next" href="/page/3/">Newer &rarr;</a>
            </li>
          
        </ul>
      </div>
  </div>
</div>


  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>recent posts</h2>
    <ul class="recent_posts">
      
        <li>
          <a href="/2014/03/weather-github-downtime-by-pushing-to-all-the-places/">Weather Github Downtime by Pushing to All the Places</a>
        </li>
      
        <li>
          <a href="/2014/03/git-archeology-find-the-secrets-of-those-who-came-before/">Git Archaeology - Find the Secrets of those Who Came Before</a>
        </li>
      
        <li>
          <a href="/2014/03/conference-advice-how-to-meet-devs-and-influence-ppl/">Conference Advice: How to Meet Devs and Influence Ppl</a>
        </li>
      
        <li>
          <a href="/2014/02/pathogen-dot-vim-without-the-submodules-use-infect/">Pathogen.vim without the Submodules: Use Infect</a>
        </li>
      
        <li>
          <a href="/2014/02/solving-issues-with-rvm-on-bsd/">Solving Issues with RVM on BSD</a>
        </li>
      
    </ul>
    <h2><a href="/archives">archives</a></h2>
  </div>
  <div class="span3">
    

  </div>
  <div class="span4">
    
<h2>twitter</h2>
<a href="https://twitter.com/_ZPH" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @_ZPH</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<div class="tweet" data-twitter-user="_ZPH">
</div>


  </div>
  <div class="span2">
    <h2>found on</h2>

<a href="https://github.com/ZPH/" rel="tooltip" title="Github"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/_ZPH" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>







<h2>contact at</h2>
<a href="mailto:zander@civet.ws">zander@civet.ws</a>
<a href="http://twitter.com/_ZPH" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>


  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  <a href="/">Civet</a>
  - Copyright &copy; 2014 - Zander
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <span>Designed by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span>
  
</p>

  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>
<a title="Web Statistics" href="http://clicky.com/100580798"><img alt="Web Statistics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100580798); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100580798ns.gif" /></p></noscript>








  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
